# 실행 컨텍스트의 역할
```typescript jsx
// 전역 변수 선언
const x = 1;
const y = 10;

// 함수 정의
function foo(a) {
	// 지역 변수 선언
	const x = 100;
	const y = 1000;
	
	// 메서드 호출
	console.log(a + x + y) // 1200
}

// 함수 호출
foo(100)

// 메서드 호출
console.log(x + y) // 11
```

## 1) 전역 코드의 평가
- 전역 코드를 실행하기 전, 전역 코드 평가 과정을 거친 후 전역 코드를 실행하기 위한 준비를 한다
- 소스코드 평가 과정에서는 선언문 먼저 실행된다
- 이 두 가지를 합쳐서 나오는 결론은 전역 코드의 변수 선언문, 함수 선언문이 먼저 실행된다
  - 이 결과 생성된 전역 변수와 전역 함수는 실행 컨텍스트가 관리하는 전역 스코프에 등록된다
  - var 키워드로 선언된 전역 변수, 함수 선언문으로 정의된 전역 함수는 전역 객체의 프로퍼티와 메서드가 된다

## 2) 전역 코드의 실행
- 전역 코드 평가 과정이 끝나면 런타임이 시작되고 전역 코드가 순차적으로 실행된다
- 전역 변수에는 값이 할당된다
- 전역 함수는 호출된다
  - 함수가 호출되면 순차적으로 진행된 전역 코드의 실행을 일시 중단하고 코드 실행 순서를 변경해 함수 내부로 진입한다
  
## 3) 함수 코드의 평가
- 함수 내부로 진입하면 함수 내부 문들을 실행하기 전 함수 코드 평가 과정을 거치고 함수 코드를 실행하기 위한 준비를 한다
  - 매개변수, 지역 변수 선언문이 먼저 실행된다
  - 그 결과 생성된 매개 변수와 지역 변수가 실행 컨텍스트가 관리하는 지역 스코프에 등록된다
  - 함수 내부에서 지역 변수처럼 사용할 수 있는 arguments 도 객체로 생성되어 지역 스코프에 등록되고 this 바인딩도 결정된다

## 4) 함수 코드의 실행
- 함수 코드 평가 과정이 끝나면 런타임이 시작되고 함수 코드가 실행된다
- 매개변수와 지역 변수에 값이 할당되고 지역 스코프 내의 console.log 메서드가 호출된다
- console.log 메서드를 호출하기 위해서는 식별자인 console 을 스코프 체인을 통해 검색한다
  - 지역 스코프 내에는 없으므로 스코프 체인을 통해 전역 스코프까지 올라간다
  - console 은 전역 객체의 프로퍼티로 존재한다
- log 프로퍼티를 console 객체의 프로토타입 체인을 통해 검색한다
  - 검색이 완료되면 인수로 전달된 a + x + y 가 평가된다
    - a, x, y 식별자는 스코프 체인을 통해서 검색한다
- console.log 메서드 실행이 종료되면 함수 코드 실행과정이 종료된다
- 함수 호출 이전으로 돌아가 전역 코드 실행을 이어 나간다

## 코드가 실행되기 위해 필요한 것
- 이처럼 코드가 실행되려면 스코프, 식별자, 코드 실행 순서 등의 관리가 필요하다
1. 선언에 의해 생성된 모든 식별자를 스코를 구분해서 등록해야 한다. 그리고 상태 변화를 지속적으로 관리해야 한다
2. 스코프는 중첩관계에 의해 스코프 체인을 형성해야 한다. 즉 스코프를 이동하며 식별자를 검색할 수 있어야 한다
3. 현재 실행중인 코드의 실행 순서를 변경(함수 호출에 의한 실행 순서 변경 등)할 수 있어야 하며 다시 되돌아갈 수 있어야 한다

## 이 모든 것이 실행 컨텍스트
- 위의 내용들을 모두 관리하는 것이 바로 실행 컨텍스트다
- 실행 컨텍스트는 소스 코드를 실행하는데 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역이다
- 실행 컨텍스트는 
  - 식별자(변수, 함수, 클래스)를 등록하고 관리하는 스코프
  - 코드 실행 순서를 관리를 구현한 내부 메커니즘
  - 위 두가지로 모든 코드를 실행하고 관리한다
- 식별자와 스코프는 실행 컨텍스트의 렉시컬 환경으로 관리한다
- 실행 순서는 실행 컨텍스트 스택으로 관리한다